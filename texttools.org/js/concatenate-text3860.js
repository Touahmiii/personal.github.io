/*
 * Copyright (C) 2022 Text Tools. All Rights Reserved.
 * This file is part of texttools.org
 * Proprietary Software License
*/
var colA=$("#input_colA"),colB=$("#input_colB"),area=$("#output_text"),examples=JSON.parse(localStorage.getItem("ta_examples"));function loadTextA(){var e=$("#upload_colA").get(0).files[0],t=new FileReader;t.onload=function(e){e=e.target.result;$("#input_colA").val(e)},t.readAsText(e,"UTF-8")}function loadTextB(){var e=$("#upload_colB").get(0).files[0],t=new FileReader;t.onload=function(e){e=e.target.result;$("#input_colB").val(e)},t.readAsText(e,"UTF-8")}function saveText(e,t){var n=navigator.userAgent.match(/MSIE\s([\d.]+)/),l=navigator.userAgent.match(/Trident\/7.0/)&&navigator.userAgent.match(/rv:11/),o=navigator.userAgent.match(/Edge/g),l=n?n[1]:l?11:o?12:-1;n&&l<10?console.log("No blobs on IE ver<10"):(t=(t=document.getElementById("output_text").value).replace(/\r?\n/g,"\r\n"),o=new Blob([t],{type:"text/plain"}),"null.txt"!=(e=prompt("File name:","New Document")+".txt")&&(-1<l?window.navigator.msSaveBlob(o,e):((n=document.createElement("a")).download=e,n.href=window.URL.createObjectURL(o),n.onclick=function(e){document.body.removeChild(e.target)},n.style.display="none",document.body.appendChild(n),n.click())))}1==examples&&(colA.val("A\nB\nC"),colB.val("1\n2\n3")),$("#combineText").click(function(){prefix=$("#prefix").val(),infix=$("#infix").val(),suffix=$("#suffix").val(),input1=colA.val().replace(/\r\n|\r|\n/gm,"\n").split("\n"),input2=colB.val().replace(/\r\n|\r|\n/gm,"\n").split("\n");for(var e=input1.length,t=input2.length,n=e+t,l=0,o=Math.max(input1.length,input2.length),i=[],l=0;l<o;l++)null==input1[l]&&(input1[l]=""),null==input2[l]&&(input2[l]=""),(!$("#isEmpty").prop("checked")||input1[l]+input2[l]!="")&&(i[l]=prefix+input1[l]+infix+input2[l]+suffix);i=i.join("\n"),$("#output_text").val(i),$("#instances").html("Combined Lines: "+n+" ("+e+", "+t+")"),$("#premerge, #file_upload, #options").hide(),$("#merged, #file_download").show(),Toast("Merged "+n+" lines")}),$("#startOver").click(function(){$("#merged, #file_download").hide(),$("#premerge, #file_upload, #options").show()}),$(".clipboard").click(function(){Clipboard(area)}),$("#clearAll").click(function(){$("#input_colA, #input_colB, #output_text").val("")}),$("#file_download").click(function(){saveText()});