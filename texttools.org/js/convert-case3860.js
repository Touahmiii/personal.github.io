/*
 * Copyright (C) 2022 Text Tools. All Rights Reserved.
 * This file is part of texttools.org
 * Proprietary Software License
*/
var area=$("#input_output"),examples=JSON.parse(localStorage.getItem("ta_examples"));function toTitleCase(e,a){var o;return"ap_case"===a?o=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i:"title_case"===a&&(o=/^(a|abaft|about|above|afore|after|along|amid|among|an|and|apud|as|aside|at|atop|below|but|by|circa|down|for|from|given|in|into|lest|like|mid|midst|minus|near|next|nor|of|off|on|onto|or|out|over|pace|past|per|plus|pro|qua|round|sans|save|since|so|than|the|thru|till|times|to|under|until|unto|up|upon|via|vice|with|worth|yet)$/i),e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,a,t){return 0<a&&a+e.length!==t.length&&-1<e.search(o)&&":"!==t.charAt(a-2)&&("-"!==t.charAt(a+e.length)||"-"===t.charAt(a-1))&&t.charAt(a-1).search(/[^\s-]/)<0?e.toLowerCase():-1<e.substr(1).search(/[A-Z]|\../)?e:e.charAt(0).toUpperCase()+e.substr(1)})}function wordCase(e){var a=e.split(" "),t="";for(i=0;i<a.length;i++)lowerWord=(lowerWord=a[i].toLowerCase()).trim(),t+=capitalizedWord=lowerWord.slice(0,1).toUpperCase()+lowerWord.slice(1),i!=a.length-1&&(t+=" ");return t[t.length-1]="",t}function loadText(){var e=$("#file_upload").get(0).files[0],a=new FileReader;a.onload=function(e){e=e.target.result;area.val(e)},a.readAsText(e,"UTF-8")}function saveText(e,a){var t=navigator.userAgent.match(/MSIE\s([\d.]+)/),o=navigator.userAgent.match(/Trident\/7.0/)&&navigator.userAgent.match(/rv:11/),n=navigator.userAgent.match(/Edge/g),o=t?t[1]:o?11:n?12:-1;t&&o<10?console.log("No blobs on IE ver<10"):(a=(a=document.getElementById("input_output").value).replace(/\r?\n/g,"\r\n"),n=new Blob([a],{type:"text/plain"}),"null.txt"!=(e=prompt("File name:","New Document")+".txt")&&(-1<o?window.navigator.msSaveBlob(n,e):((t=document.createElement("a")).download=e,t.href=window.URL.createObjectURL(n),t.onclick=function(e){document.body.removeChild(e.target)},t.style.display="none",document.body.appendChild(t),t.click())))}function printTextArea(){(childWindow=window.open("","childWindow","location=yes, menubar=yes, toolbar=yes")).document.open(),childWindow.document.write('<html><head></head><body style="word-wrap:break-word;"><style>.ap_container,.google-auto-placed,.adsbygoogle{display:none}</style>'),childWindow.document.write(document.getElementById("input_output").value.replace(/\n/gi,"<br>")),childWindow.document.write("</body></html>"),childWindow.print(),childWindow.document.close(),childWindow.close()}1==examples&&area.val("tHE quIck BroWN FOx jUmpS oveR ThE lazY Dog"),$("#applyCase").click(function(){Remember();var e=area.val().replace(/\r\n|\r|\n/gm,"\n"),a=$("#settings").val().toLowerCase();if("uppercase"==a)e=e.toUpperCase(),Toast("Uppercase applied");else if("lowercase"==a)e=e.toLowerCase(),Toast("Lowercase applied");else if("title case"==a)e=toTitleCase(e=wordCase(e),"title_case"),Toast("Title case applied");else if("ap title case"==a)e=toTitleCase(e=wordCase(e),"ap_case"),Toast("AP title case applied");else if("each word"==a)e=wordCase(e),Toast("Each word capitalized");else if("sentence case"==a)e=(e=e.toLowerCase()).replace(/(^|[.!?]\s+)([a-z])/g,(e,a,t)=>a+t.toUpperCase()),Toast("Sentence case applied");else if("random case"==a){e=e.split("");for(var t=0,t=0;t<e.length;t++)e[t]&&(1==(r=Math.floor(2*Math.random())+1)?e[t]=e[t].toUpperCase():2==r&&(e[t]=e[t].toLowerCase()));e=e.join(""),Toast("Shuffled")}area.val(e),Remember()}),$(".clipboard").click(function(){Clipboard(area)}),$("#clearAll, #edit_delete, #file_new").click(function(){area.val(""),Remember()}),$("#file_upload").on("change",function(){loadText()}),$("#file_download").click(function(){saveText()}),$("#file_print").click(function(){printTextArea()}),$("#edit_undo").click(function(){var e=History.undo();void 0!==e&&area.val(e)}),$("#edit_redo").click(function(){var e=History.redo();void 0!==e&&area.val(e)}),$("#edit_copy").click(function(){Clipboard(area)}),$("#edit_select").click(function(){area.select().focus()});var History=function(){var a=[],t=0;return{remember:function(e){a[t-1]!==e&&(a.splice(t,10),a.push(e),a.splice(0,a.length-10),t=a.length)},undo:function(){if(1<t)return a[--t-1]},redo:function(){if(t<a.length)return a[t++]}}}();function Remember(){var e=area.val();History.remember(e)}Remember();