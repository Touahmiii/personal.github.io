/*
 * Copyright (C) 2022 Text Tools. All Rights Reserved.
 * This file is part of texttools.org
 * Proprietary Software License
*/
var area=$("#input_output"),examples=JSON.parse(localStorage.getItem("ta_examples"));function WordCounter(){for(var e=area.val(),t=(e=e.replace(/\r\n|\r|\n/gm,"\n")).replace(/\s\s+|\n/gm," ").match(/\w+/gm),t=(numwords=null==t?0:t.length,$("#total_words").html(commify(numwords)),e.split("")),t=($("#total_char").html(commify(t.length)),e.replace(/\s/g,"").split("")),t=($("#total_charNS").html(commify(t.length)),e.split("\n")),t=($("#total_lines").html(commify(t.length)),e.match(/[^\.!\?]+[\.!\?]+/gm)),a=(numSen=null==t?0:t.length,$("#total_sentences").html(commify(numSen)),e.replace(/[^\S\n]/gm,"").split("\n")),i=0,n=0,i=0;i<a.length;i++)a[i]&&n++;$("#total_paragraphs").html(commify(n)),area.val(e)}1==examples&&area.val("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur posuere ultrices velit, eget venenatis elit aliquet vitae. Mauris pellentesque tristique odio nec maximus. Nam euismod nunc vitae porta vulputate. Vestibulum ultricies, enim sed iaculis convallis, massa enim vehicula metus, nec malesuada lacus mi ut turpis. Nulla vitae feugiat lorem, at posuere enim. Curabitur feugiat, dolor vitae imperdiet tincidunt, elit urna tempor metus, at bibendum dui erat sit amet odio. Nulla maximus lacus sem. Maecenas placerat felis cursus justo consequat, vel feugiat arcu ultricies. Morbi vulputate eget enim at faucibus. In a feugiat nisi. Phasellus a lorem sit amet libero vulputate lobortis. Morbi est metus, blandit et mollis quis, molestie sed nibh. Morbi vel turpis nec dui facilisis accumsan quis condimentum risus. Nullam tempor, nisl tincidunt tincidunt ultricies, massa nisl vulputate est, quis vulputate justo dui sed ante. Donec convallis, neque non aliquam tristique, tortor mauris mattis mi, vel venenatis urna sem eget augue. Nulla ac metus quam?\n\nSed varius lectus nec quam pharetra tristique. Nunc eleifend lobortis sem, quis fermentum risus pulvinar in. Pellentesque eu nisl quis mi tincidunt gravida. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas?!?\n\nQuisque non felis ut nisi convallis porttitor. Nam faucibus eget tellus nec dignissim. Maecenas faucibus, ipsum in venenatis malesuada, mi magna porta nibh, eget accumsan enim mauris in erat. Nam volutpat commodo justo, et luctus libero ultrices at. Morbi eu mi neque."),$(document).ready(function(){WordCounter(),area.on("change keyup paste",function(){WordCounter();var e=$(this).val();History.remember(e)})});var textwrap=JSON.parse(localStorage.getItem("ta_textwrap"));function commify(e){return String(e).split("").reverse().join("").replace(/(...)(?!$)/g,"$1,").split("").reverse().join("")}function loadText(){var e=$("#file_upload").get(0).files[0],t=new FileReader;t.onload=function(e){e=e.target.result;area.val(e),WordCounter()},t.readAsText(e,"UTF-8")}function saveText(e,t){var a=navigator.userAgent.match(/MSIE\s([\d.]+)/),i=navigator.userAgent.match(/Trident\/7.0/)&&navigator.userAgent.match(/rv:11/),n=navigator.userAgent.match(/Edge/g),i=a?a[1]:i?11:n?12:-1;a&&i<10?console.log("No blobs on IE ver<10"):(t=(t=document.getElementById("input_output").value).replace(/\r?\n/g,"\r\n"),n=new Blob([t],{type:"text/plain"}),"null.txt"!=(e=prompt("File name:","New Document")+".txt")&&(-1<i?window.navigator.msSaveBlob(n,e):((a=document.createElement("a")).download=e,a.href=window.URL.createObjectURL(n),a.onclick=function(e){document.body.removeChild(e.target)},a.style.display="none",document.body.appendChild(a),a.click())))}function printTextArea(){(childWindow=window.open("","childWindow","location=yes, menubar=yes, toolbar=yes")).document.open(),childWindow.document.write('<html><head></head><body style="word-wrap:break-word;"><style>.ap_container,.google-auto-placed,.adsbygoogle{display:none}</style>'),childWindow.document.write(document.getElementById("input_output").value.replace(/\n/gi,"<br>")),childWindow.document.write("</body></html>"),childWindow.print(),childWindow.document.close(),childWindow.close()}1==textwrap?$("#isWrap").prop("checked",!0):0==textwrap&&$("#isWrap").prop("checked",!1),$("#isWrap").change(function(){$(this).is(":checked")?$(".textbox").removeClass("wrap-off").addClass("wrap-on"):$(".textbox").removeClass("wrap-on").addClass("wrap-off")}),$("#clearAll, #edit_delete, #file_new").click(function(){area.val(""),$("#total_words, #total_char, #total_charNS, #total_lines, #total_sentences, #total_paragraphs").html("0"),Remember()}),$("#file_upload").on("change",function(){loadText()}),$("#file_download").click(function(){saveText()}),$("#file_print").click(function(){printTextArea()}),$("#edit_undo").click(function(){var e=History.undo();void 0!==e&&area.val(e),WordCounter()}),$("#edit_redo").click(function(){var e=History.redo();void 0!==e&&area.val(e),WordCounter()}),$("#edit_copy, #copyAll").click(function(){Clipboard(area)}),$("#edit_select").click(function(){area.select().focus()});var History=function(){var t=[],a=0;return{remember:function(e){t[a-1]!==e&&(t.splice(a,50),t.push(e),t.splice(0,t.length-50),a=t.length)},undo:function(){if(1<a)return t[--a-1]},redo:function(){if(a<t.length)return t[a++]}}}();function Remember(){var e=area.val();History.remember(e)}Remember();