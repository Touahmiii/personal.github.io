/*
 * Copyright (C) 2022 Text Tools. All Rights Reserved.
 * This file is part of texttools.org
 * Proprietary Software License
*/
var area=$("#input_output"),examples=JSON.parse(localStorage.getItem("ta_examples"));function resetCount(){$("#instances").html("Characters removed: 0")}function loadText(){var e=$("#file_upload").get(0).files[0],t=new FileReader;t.onload=function(e){e=e.target.result;area.val(e)},t.readAsText(e,"UTF-8")}function saveText(e,t){var a=navigator.userAgent.match(/MSIE\s([\d.]+)/),n=navigator.userAgent.match(/Trident\/7.0/)&&navigator.userAgent.match(/rv:11/),o=navigator.userAgent.match(/Edge/g),n=a?a[1]:n?11:o?12:-1;a&&n<10?console.log("No blobs on IE ver<10"):(t=(t=document.getElementById("input_output").value).replace(/\r?\n/g,"\r\n"),o=new Blob([t],{type:"text/plain"}),"null.txt"!=(e=prompt("File name:","New Document")+".txt")&&(-1<n?window.navigator.msSaveBlob(o,e):((a=document.createElement("a")).download=e,a.href=window.URL.createObjectURL(o),a.onclick=function(e){document.body.removeChild(e.target)},a.style.display="none",document.body.appendChild(a),a.click())))}function printTextArea(){(childWindow=window.open("","childWindow","location=yes, menubar=yes, toolbar=yes")).document.open(),childWindow.document.write('<html><head></head><body style="word-wrap:break-word;"><style>.ap_container,.google-auto-placed,.adsbygoogle{display:none}</style>'),childWindow.document.write(document.getElementById("input_output").value.replace(/\n/gi,"<br>")),childWindow.document.write("</body></html>"),childWindow.print(),childWindow.document.close(),childWindow.close()}1==examples&&($("#settings>option:eq(6)").prop("selected",!0),$("#charList").val(".,?!'\":;-–—"),area.val("The quick brown fox jumps over the lazy dog.\nHello?\nHi, how are you?\nDon't do that!")),$("#removeChars").click(function(){Remember();var e,t=area.val();t=1==$("#settings").val()?t.replace(/[^\w\s]|_/gm,""):(e="["+(e=$("#charList").val().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))+"]",e=new RegExp(e,"gm"),t.replace(e,"")),area.val(t),Toast("Characters removed"),Remember()}),$("#settings").on("change",function(){var e=$("#settings").val();0==e||1==e?$("#charList").val(""):2==e?$("#charList").val("!\"#$%&'()*+,-.:;<=>?@[\\]^_`{|}~"):3==e?$("#charList").val("ÁáÀàÂâǍǎĂăÃãẢảẠạÄäÅåĀāĄąẤấẦầẪẫẨẩẬậẮắẰằẴẵẲẳẶặǺǻĆćĈĉČčĊċÇçĎďĐđÐÉéÈèÊêĚěĔĕẼẽẺẻĖėËëĒēĘęẾếỀềỄễỂểẸẹỆệĞğĜĝĠġĢģĤĥĦħÍíÌìĬĭÎîǏǐÏïĨĩĮįĪīỈỉỊịĴĵĶķĹĺĽľĻļŁłĿŀŃńŇňÑñŅņÓóÒòŎŏÔôỐốỒồỖỗỔổǑǒÖöŐőÕõØøǾǿŌōỎỏƠơỚớỜờỠỡỞởỢợỌọỘộṔṕṖṗŔŕŘřŖŗŚśŜŝŠšŞşŤťŢţŦŧÚúÙùŬŭÛûǓǔŮůÜüǗǘǛǜǙǚǕǖŰűŨũŲųŪūỦủƯưỨứỪừỮữỬửỰựỤụẂẃẀẁŴŵẄẅÝýỲỳŶŷŸÿỸỹỶỷỴỵŹźŽžŻż"):4==e?$("#charList").val("AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"):5==e?$("#charList").val("1234567890"):6==e?$("#charList").val(".,?!'\":;-–—"):7==e&&$("#charList").val("¤¶§!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¢£¥¿¬½¼¡«»¦±°•·²€„…†‡ˆ‰‹‘’“”–—˜™›¨©®¯³´¸¹¾×÷"),1==e?($("#character-list").hide(),$("#non-alphanumeric").show()):($("#non-alphanumeric").hide(),$("#character-list").show())}),$(".clipboard").click(function(){Clipboard(area)}),$("#clearAll, #edit_delete, #file_new").click(function(){area.val(""),resetCount(),Remember()}),$("#file_upload").on("change",function(){loadText(),resetCount()}),$("#file_download").click(function(){saveText()}),$("#file_print").click(function(){printTextArea()}),$("#edit_undo").click(function(){var e=History.undo();void 0!==e&&area.val(e),resetCount()}),$("#edit_redo").click(function(){var e=History.redo();void 0!==e&&area.val(e),resetCount()}),$("#edit_copy").click(function(){Clipboard(area)}),$("#edit_select").click(function(){area.select().focus()});var History=function(){var t=[],a=0;return{remember:function(e){t[a-1]!==e&&(t.splice(a,10),t.push(e),t.splice(0,t.length-10),a=t.length)},undo:function(){if(1<a)return t[--a-1]},redo:function(){if(a<t.length)return t[a++]}}}();function Remember(){var e=area.val();History.remember(e)}Remember();